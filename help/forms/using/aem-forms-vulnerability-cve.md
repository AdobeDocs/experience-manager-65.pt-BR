---
title: Reduzindo vulnerabilidades do Log4j2 para o Experience Manager Forms
description: Reduzindo vulnerabilidades do Log4j2 para o Experience Manager Forms
content-type: reference
products: SG_EXPERIENCEMANAGER/6.5/FORMS
topic-tags: Security
geptopics: SG_AEMFORMS/categories/jee
role: Admin
solution: Experience Manager, Experience Manager Forms
feature: Adaptive Forms
source-git-commit: c9d9a4d83a00587ee7b223e328abdef1bdd7438b
workflow-type: tm+mt
source-wordcount: '720'
ht-degree: 2%

---

# Reduzindo vulnerabilidades do Log4j2 para o Experience Manager Forms

## Problema

Vulnerabilidades críticas de segurança foram relatadas para o Apache Log4j2, uma biblioteca de logon popular para aplicativos baseados em Java. As seguintes vulnerabilidades foram analisadas:

<table border="1">
  <tr>
    <th>Vulnerabilidade</th>
    <th>O que foi impactado</th>
    <th>O que não é impactado?</th>
    <th>Status</th>
  </tr>
  <tr>
    <td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=2021-44228">CVE-2021-44228</a></td>
    <td rowspan="2">
      <ul>
        <li>Experience Manager 6.5 Forms no JEE (todas as versões de 6.5 GA para 6.5.11)</li>
        <li>Experience Manager 6.4 Forms no JEE (todas as versões de 6.4 GA para 6.4.8)</li>
        <li>Experience Manager 6.3 Forms no JEE (todas as versões de 6.3 GA para 6.3.3)</li>
        <li>Experience Manager 6.5 Forms Designer</li>
        <li>Experience Manager 6.4 Forms Designer</li>
        <li>Serviço de conversão automática de formulários</li>
      </ul>
    </td>
    <td rowspan="2">
      <ul>
        <li>Experience Manager Forms Workbench (todas as versões)</li>
        <li>Experience Manager Forms no OSGi (todas as versões)</li>
      </ul>
    </td>
    <td rowspan="2">
      Elas foram corrigidas. Consulte a seção <strong>Resolução</strong> para obter correções e etapas de atenuação.
    </td>
  </tr>
  <tr>
    <td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=2021-45046">CVE-2021-45046</a></td>
  </tr>
  <tr>
    <td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-45105">CVE-2021-45105</a></td>
    <td rowspan="9" colspan="2">
      Nenhum impacto em qualquer versão do Experience Manager Forms nas configurações de registro predefinidas. Se você tiver configurações de logon adicionais, verifique essas configurações em busca dessas vulnerabilidades.
    </td>
  </tr>
  <tr><td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=2021-44832">CVE-2021-44832</a></td><td></td></tr>
  <tr><td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=2021-4104">CVE-2021-4104</a></td><td></td></tr>
  <tr><td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-22963">CVE-2022-22963</a></td><td></td></tr>
  <tr><td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-22965">CVE-2022-22965</a></td><td></td></tr>
  <tr><td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2020-9488">CVE-2020-9488</a></td><td></td></tr>
  <tr><td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-23302">CVE-2022-23307</a></td><td></td></tr>
</table>

>[!NOTE]
> 
> O AEM 6.5.13.0 Forms e versões anteriores incluem as bibliotecas Log4j (1.x e 2.17.1). As bibliotecas AEM Forms Log4j 1.x no AEM 6.5.13.0 Forms e versões anteriores não fazem parte da vulnerabilidade relatada, nem são consideradas vulneráveis em verificações de código do AEM Forms executadas pelo Adobe. No entanto, todas as bibliotecas do Log4j 1.x são removidas na versão 6.5.14. Para obter instruções sobre como instalar o AEM 6.5.14.0 ou uma versão posterior, consulte as [notas de versão](https://experienceleague.adobe.com/pt-br/docs/experience-manager-65/content/release-notes/release-notes).

## Resolução

Você pode usar um dos seguintes métodos para reduzir o risco dessa vulnerabilidade:

* Instalar o pacote de serviços mais recente
* Usar etapas de mitigação manual

**Instalar o pacote de serviços mais recente**

>[!CAUTION]
> 
> Se você tiver aplicado um hotfix no ambiente Experience Manager Forms Service Pack 6.3.3.8 ou Experience Manager Forms Service Pack 6.4.8.4, não instale o service pack com as correções de vulnerabilidades (listadas abaixo). A instalação desses pacotes de serviços pode substituir o hotfix. A Adobe recomenda usar **etapas de mitigação manual** em tal cenário.

<table border="1" cellpadding="8" cellspacing="0">
  <thead>
    <tr>
      <th>Versão</th>
      <th>Versão</th>
      <th>Link de download/ação do usuário</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Experience Manager 6.5 Forms no JEE</td>
      <td>AEMForms-6.5.0-0038 (log4jv2.16)</td>
      <td rowspan="5">Baixar de <a href="https://auth.services.adobe.com/en_US/index.html?callback=https%3A%2F%2Fims-na1.adobelogin.com%2Fims%2Fadobeid%2Fexc_app%2FAdobeID%2Ftoken%3Fredirect_uri%3Dhttps%253A%252F%252Fexperience.adobe.com%252F%2523old_hash%253Dold_hash%253D%252523%25252Fdownloads%2526from_ims%253Dtrue%253Fclient_id%253Dexc_app%2526api%253Dauthorize%2526scope%253Dab.manage%252Caccount_cluster.read%252Cadditional_info%252Cadditional_info.job_function%252Cadditional_info.projectedProductContext%252Cadditional_info.roles%252CAdobeID%252Cadobeio.appregistry.read%252Cadobeio_api%252Caudiencemanager_api%252Ccreative_cloud%252Cmps%252Copenid%252Corg.read%252Cpps.read%252Cread_organizations%252Cread_pc%252Cread_pc.acp%252Cread_pc.dma_tartan%252Csession%26state%3D%257B%2522jslibver%2522%253A%2522v2-v0.31.0-2-g1e8a8a8%2522%252C%2522nonce%2522%253A%25223811059492261787%2522%257D%26code_challenge_method%3Dplain%26use_ms_for_expiry%3Dtrue&amp;client_id=exc_app&amp;scope=ab.manage%2Caccount_cluster.read%2Cadditional_info%2Cadditional_info.job_function%2Cadditional_info.projectedProductContext%2Cadditional_info.roles%2CAdobeID%2Cadobeio.appregistry.read%2Cadobeio_api%2Caudiencemanager_api%2Ccreative_cloud%2Cmps%2Copenid%2Corg.read%2Cpps.read%2Cread_organizations%2Cread_pc%2Cread_pc.acp%2Cread_pc.dma_tartan%2Csession&amp;state=%7B%22jslibver%22%3A%22v2-v0.31.0-2-g1e8a8a8%22%2C%22nonce%22%3A%223811059492261787%22%7D&amp;relay=2cf36844-ac87-4b40-a6fe-9a06cd0a01b8&amp;locale=en_US&amp;flow_type=token&amp;dctx_id=v%3A2%2Cs%2Cf%2Cb8e64530-b013-11ee-a6c1-e721bdec0171&amp;idp_flow_type=login&amp;response_type=token&amp;profile_filter=%7B%22findFirst%22%3Atrue%2C+%22fallbackToAA%22%3Atrue%2C+%22preferForwardProfile%22%3Atrue%2C+%22searchEntireCluster%22%3Afalse%7D%3B+hasPC%28%22dma_tartan%22%29&amp;code_challenge_method=plain&amp;redirect_uri=https%3A%2F%2Fexperience.adobe.com%2F%23old_hash%3Dold_hash%3D%2523%252Fdownloads%26from_ims%3Dtrue%3Fclient_id%3Dexc_app%26api%3Dauthorize%26scope%3Dab.manage%2Caccount_cluster.read%2Cadditional_info%2Cadditional_info.job_function%2Cadditional_info.projectedProductContext%2Cadditional_info.roles%2CAdobeID%2Cadobeio.appregistry.read%2Cadobeio_api%2Caudiencemanager_api%2Ccreative_cloud%2Cmps%2Copenid%2Corg.read%2Cpps.read%2Cread_organizations%2Cread_pc%2Cread_pc.acp%2Cread_pc.dma_tartan%2Csession&amp;use_ms_for_expiry=true#/">Distribuição de Software</a>.</td>
    </tr>
    <tr>
      <td>Experience Manager 6.4 Forms no JEE</td>
      <td>AEMForms-6.4.0-0027</td>
    </tr>
    <tr>
      <td>Experience Manager 6.3 Forms no JEE</td>
      <td>AEMForms-6.3.0-0047</td>
    </tr>
    <tr>
      <td>Experience Manager 6.5 Forms Designer</td>
      <td>AEM Forms Designer v650.019</td>
    </tr>
    <tr>
      <td>Experience Manager 6.4 Forms Designer</td>
      <td>AEM Forms Designer v640.012</td>
    </tr>
    <tr>
      <td>Serviço de conversão automática de formulários</td>
      <td>As etapas de mitigação foram identificadas e o serviço foi corrigido.</td>
      <td>Não há nenhuma ação do usuário.</td>
    </tr>
  </tbody>
</table>

## Usar etapas de mitigação manual

Para mitigar o problema, para o Experience Manager 6.5 Forms (log4j-core versão 2.10 e posterior), Experience Manager 6.4 Forms (log4j-core versão anterior à 2.10) e Experience Manager 6.3 Forms (log4j-core versão anterior à 2.10), execute as seguintes etapas:

1. Desative todas as instâncias e localizadores do servidor.

1. Remover `org/apache/logging/log4j/core/lookup/JndiLookup.class` do `log4j-core-2.xx.jar` vulnerável disponível nos seguintes locais:

   * **EAR implantável:**

   ```javascript
   <FORMS_INSTALLATION_DIRECTORY>/configurationManager/export/adobe-livecycle-[jboss|weblogic|websphere].ear
   ```

   * **Localizador de GemFire ou Geode:**

   ```javascript
   <FORMS_INSTALLATION_DIRECTORY>/lib/caching/lib
   ```

   Para atualizar o EAR Implantável, dependendo do sistema operacional, você pode usar um dos métodos a seguir para remover o `JndiLookup.class` do `log4j-core-2.xx.jar` vulnerável:

   * (Linux com Oracle WebLogic ou Redhat JBoss): execute o seguinte comando. Atualize o `version` e as informações do servidor de aplicativos antes de executar estes comandos:

   ```javascript
   unzip adobe-livecycle-<weblogic|jboss>.ear lib/log4j-core-<version>.jar
   ```

   ```javascript
   zip -d lib/log4j-core-xxx.jar org/apache/logging/log4j/core/lookup/JndiLookup.  class
   ```

   ```javascript
   zip -ru adobe-livecycle-jboss.ear lib/log4j-core-<version>.jar
   ```

   * (Linux com IBM WebSphere): execute o seguinte comando. Atualize o `version` e as informações do servidor de aplicativos antes de executar estes comandos:

   ```javascript
   unzip adobe-livecycle-websphere.ear log4j-core-<version>.jar
   ```

   ```javascript
   zip -d log4j-core-xxx.jar org/apache/logging/log4j/core/lookup/JndiLookup.class
   ```

   * (Microsoft Windows): Use uma ferramenta de GUI como [7-Zip](https://www.7-zip.org/) para remover o arquivo de classe.
1. Repita a etapa 2 para cada instância (nó) do servidor de aplicativos e todos os localizadores (se houver mais de um).

1. Depois de atualizar o jar, reimplante o EAR modificado e reinicie todos os processos do localizador e instâncias do servidor.

>[!NOTE]
> 
> * Substitua a cópia original do jar log4j-core-2.xx pela cópia atualizada. Nenhuma outra alteração é necessária.
> * Quando o gerenciador de configurações for executado novamente, o conteúdo de `<FORMS_INSTALLATION_DIRECTORY/configurationManager/export` poderá ser substituído.   Para evitar refazer a alteração acima toda vez que isso ocorrer, atualize o jar em `<FORMS_INSTALLATION_DIRECTORY>/deploy/adobe-core-[jboss|weblogic|websphere].ear`. Isso garante que o `adobe-livecycle-[jboss|weblogic|websphere].ear` produzido pelo gerenciador de configurações já tenha o `log4j-core-2.xx jar` atualizado.
> * As modificações manuais nos artefatos implantáveis podem ser substituídas na correção/atualização. Se isso acontecer, reaplique o procedimento.

## Referências

[https://logging.apache.org/log4j/2.x/security.html](https://logging.apache.org/security.html)

**Com quem devo entrar em contato se tiver dúvidas adicionais ou problemas ao executar as etapas de mitigação?**

Você pode contatar o [Suporte da Adobe](https://experienceleague.adobe.com/?lang=pt-BR&amp;support-solution=Experience+Manager#support) ou criar um [tíquete de suporte](https://experienceleague.adobe.com/en/docs/customer-one/using/home#submit-ticket).

**Com quem devo entrar em contato se tiver dúvidas adicionais ou problemas ao executar etapas de mitigação?**
[Avisos legais](https://helpx.adobe.com/legal/legal-notices.html)    |    [Política de Privacidade Online](https://www.adobe.com/br/privacy.html)